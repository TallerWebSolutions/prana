<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Prana by recidive</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Prana</h1>
        <p>Prana Framework</p>

        <p class="view"><a href="https://github.com/recidive/prana">View the Project on GitHub <small>recidive/prana</small></a></p>


        <ul>
          <li><a href="https://github.com/recidive/prana/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/recidive/prana/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/recidive/prana">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="prana" class="anchor" href="#prana"><span class="octicon octicon-link"></span></a>Prana</h1>

<p>Prana is a general purpose microframework for building extensible, modular applications and frameworks with strong code reusability features.</p>

<p>Prana has some breakthrough concepts that abstract the small pieces common to every application. You can use Prana for building not only web applications but also other kind of applications, such as command line applications, sockets, etc.</p>

<p>Prana provides an unified API for interacting with objects, from configuration settings, object metadata to complex media objects, everything can be created and manipulated with Prana.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<pre><code>$ npm install prana
</code></pre>

<h2>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic usage</h2>

<p>The Prana core is formed of types, events and extensions. You can define your own types, describing business objects of your application:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Prana</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'prana'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">application</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Prana</span><span class="p">();</span>
<span class="nx">application</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="k">new</span> <span class="nx">Prana</span><span class="p">.</span><span class="nx">Type</span><span class="p">(</span><span class="s1">'myType'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">'My Type'</span><span class="p">,</span>
  <span class="nx">description</span><span class="o">:</span> <span class="s1">'This is one of my application types.'</span>
<span class="p">});</span>
</pre></div>

<p>You can then start adding objects of that type, in an active records fashion:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyType</span> <span class="o">=</span> <span class="nx">application</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'myType'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">myTypeInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyType</span><span class="p">({</span>
  <span class="nx">key</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">someOtherProperty</span><span class="o">:</span> <span class="s1">'The value of another property MyType has.'</span>
<span class="p">});</span>
<span class="nx">myTypeInstance</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</pre></div>

<p>There's also the application.new() shortcut you can use to create new objects:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">myTypeInstance</span> <span class="o">=</span> <span class="nx">application</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">'myType'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">key</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">someOtherProperty</span><span class="o">:</span> <span class="s1">'The value of another property MyType has.'</span>
<span class="p">});</span>
<span class="nx">myTypeInstance</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</pre></div>

<p>In a similar way you save the item you can also get a list of items and also load a specific item from the storage:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyType</span> <span class="o">=</span> <span class="nx">application</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'myType'</span><span class="p">);</span>
<span class="nx">MyType</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Do something with items.</span>
<span class="p">});</span>
<span class="nx">MyType</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Do something with item.</span>
<span class="p">});</span>
</pre></div>

<p>For more examples check the examples folder.</p>

<h2>
<a name="events" class="anchor" href="#events"><span class="octicon octicon-link"></span></a>Events</h2>

<p>Both Prana instances (applications) and types are Event Emitters, this means you can add listeners to react on events emitted by these objects.</p>

<p>There are list, load, save, delete events on both application and type scope.</p>

<div class="highlight"><pre><span class="c1">// Global event listener.</span>
<span class="nx">application</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'save'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Global save event fired. Item type: '</span> <span class="o">+</span> <span class="nx">type</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">'.'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Define our type.</span>
<span class="kd">var</span> <span class="nx">someType</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Prana</span><span class="p">.</span><span class="nx">Type</span><span class="p">(</span><span class="s1">'someType'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">'Some Type'</span><span class="p">,</span>
  <span class="nx">description</span><span class="o">:</span> <span class="s1">'Some example type.'</span>
<span class="p">});</span>

<span class="c1">// Type specific event listener.</span>
<span class="nx">someType</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'save'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Some Type specific save event fired.'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>You can then get the constructor of our type. Once save() method is called on a item all 'save' events are fired.</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">SomeType</span> <span class="o">=</span> <span class="nx">application</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">someType</span><span class="p">);</span>

<span class="c1">// Create a new Some Type item.</span>
<span class="kd">var</span> <span class="nx">someTypeItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cache</span><span class="p">({</span>
  <span class="nx">key</span><span class="o">:</span> <span class="s1">'some-key'</span><span class="p">,</span>
  <span class="nx">value</span><span class="o">:</span> <span class="s1">'some-value'</span>
<span class="p">});</span>

<span class="c1">// Save item to memory. Fire events.</span>
<span class="nx">someTypeItem</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</pre></div>

<h2>
<a name="extensions" class="anchor" href="#extensions"><span class="octicon octicon-link"></span></a>Extensions</h2>

<p>Things start to get more interesting when we add some extensions to the loop.</p>

<p>You can add extensions programmatically like this:</p>

<div class="highlight"><pre><span class="c1">// The prototype of our programmatically created extension.</span>
<span class="kd">var</span> <span class="nx">myExtensionPrototype</span> <span class="o">=</span> <span class="p">{</span>

  <span class="c1">// The list hook allow you to alter every item on the system they get listed.</span>
  <span class="nx">list</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add a property to all types. You can use type to act only on certain</span>
    <span class="c1">// items of a certain type.</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">itemKey</span> <span class="k">in</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">items</span><span class="p">[</span><span class="nx">itemKey</span><span class="p">].</span><span class="nx">property</span> <span class="o">=</span> <span class="s1">'value'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">callback</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="c1">// Add an extension programmatically.</span>
<span class="nx">application</span><span class="p">.</span><span class="nx">extension</span><span class="p">(</span><span class="k">new</span> <span class="nx">Prana</span><span class="p">.</span><span class="nx">Extension</span><span class="p">(</span><span class="nx">application</span><span class="p">,</span> <span class="s1">'my-extension'</span><span class="p">,</span> <span class="nx">myExtensionPrototype</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">'My Extension'</span><span class="p">,</span>
  <span class="nx">description</span><span class="o">:</span> <span class="s1">'This is just an example extension.'</span>
<span class="p">}));</span>
</pre></div>

<p>You can also scan a directory for extensions:</p>

<div class="highlight"><pre><span class="c1">// Scan a folder for extensions.</span>
<span class="nx">Prana</span><span class="p">.</span><span class="nx">Extension</span><span class="p">.</span><span class="nx">scan</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/extensions'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">extensions</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Add all found extensions.</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">extensionName</span> <span class="k">in</span> <span class="nx">extensions</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">extension</span> <span class="o">=</span> <span class="nx">extensions</span><span class="p">[</span><span class="nx">extensionName</span><span class="p">];</span>
    <span class="nx">application</span><span class="p">.</span><span class="nx">extension</span><span class="p">(</span><span class="k">new</span> <span class="nx">Prana</span><span class="p">.</span><span class="nx">Extension</span><span class="p">(</span><span class="nx">application</span><span class="p">,</span> <span class="nx">extensionName</span><span class="p">,</span> <span class="nx">extension</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">extension</span><span class="p">.</span><span class="nx">info</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>This will look for two kind of files one named EXTENSIONNAME.extension.json that contains extension information. And EXTENSIONNAME.js that contains the extension protoype.</p>

<p>For example, you can have a folder called 'example' in the 'extensions' dir with example.extension.json and example.js files with the following content:</p>

<h3>
<a name="exampleextensionjson" class="anchor" href="#exampleextensionjson"><span class="octicon octicon-link"></span></a>example.extension.json</h3>

<div class="highlight"><pre><span class="p">{</span>
  <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"Example Extension"</span><span class="p">,</span>
  <span class="nt">"description"</span><span class="p">:</span> <span class="s2">"This is just an example extension."</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="examplejs" class="anchor" href="#examplejs"><span class="octicon octicon-link"></span></a>example.js</h3>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>

  <span class="c1">// The list hook allow you to alter every item on the system they get listed.</span>
  <span class="nx">list</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add a property to all types. You can use type to act only on items of a</span>
    <span class="c1">// specific type.</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">itemKey</span> <span class="k">in</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">items</span><span class="p">[</span><span class="nx">itemKey</span><span class="p">].</span><span class="nx">property</span> <span class="o">=</span> <span class="s1">'value'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">callback</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">};</span>
</pre></div>

<p>For more examples check the examples folder.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/recidive">recidive</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43023631-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>